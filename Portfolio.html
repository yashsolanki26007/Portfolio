<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfolio Builder</title>
  <script src="https://cdn.tailwindcss.com/3.4.17"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&amp;family=Space+Mono:wght@400;700&amp;display=swap" rel="stylesheet">
  <style>
    * { font-family: 'Outfit', sans-serif; }
    .mono { font-family: 'Space Mono', monospace; }
    
    .builder-container {
      background: linear-gradient(135deg, #f8f9ff 0%, #f5f7ff 100%);
    }
    
    .preview-container {
      background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 100%);
    }
    
    .form-card {
      background: white;
      border: 1px solid #e5e7eb;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
    }
    
    .input-field {
      border: 1px solid #d1d5db;
      border-radius: 0.5rem;
      padding: 0.75rem 1rem;
      font-size: 0.875rem;
      transition: all 0.3s ease;
    }
    
    .input-field:focus {
      outline: none;
      border-color: #6366f1;
      box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
    }
    
    .btn-primary {
      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
      color: white;
      border: none;
      border-radius: 0.5rem;
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    
    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(99, 102, 241, 0.3);
    }
    
    .btn-secondary {
      background: #f3f4f6;
      color: #374151;
      border: 1px solid #d1d5db;
      border-radius: 0.5rem;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    
    .btn-secondary:hover {
      background: #e5e7eb;
    }
    
    .tab-btn {
      padding: 0.75rem 1.5rem;
      font-weight: 600;
      border: none;
      background: transparent;
      cursor: pointer;
      color: #6b7280;
      border-bottom: 3px solid transparent;
      transition: all 0.3s ease;
    }
    
    .tab-btn.active {
      color: #6366f1;
      border-bottom-color: #6366f1;
    }
    
    .portfolio-hero {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      position: relative;
      overflow: hidden;
    }
    
    .portfolio-hero::before {
      content: '';
      position: absolute;
      width: 400px;
      height: 400px;
      background: rgba(99, 102, 241, 0.1);
      border-radius: 50%;
      top: -100px;
      right: -100px;
    }
    
    .portfolio-hero::after {
      content: '';
      position: absolute;
      width: 300px;
      height: 300px;
      background: rgba(139, 92, 246, 0.08);
      border-radius: 50%;
      bottom: -50px;
      left: -50px;
    }
    
    .portfolio-section {
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .portfolio-card {
      background: rgba(255, 255, 255, 0.02);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 1rem;
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }
    
    .portfolio-card:hover {
      background: rgba(255, 255, 255, 0.05);
      border-color: rgba(99, 102, 241, 0.5);
      transform: translateY(-4px);
    }
    
    .skill-badge {
      background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
      border: 1px solid rgba(99, 102, 241, 0.3);
      border-radius: 9999px;
      padding: 0.5rem 1rem;
      font-size: 0.875rem;
      color: #e0e7ff;
    }
    
    .loading-spinner {
      display: inline-block;
      width: 1rem;
      height: 1rem;
      border: 2px solid rgba(99, 102, 241, 0.2);
      border-top-color: #6366f1;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .fade-in {
      animation: fadeIn 0.5s ease-in;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
  </style>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body class="h-full bg-gray-50">
  <div class="w-full h-full flex flex-col lg:flex-row overflow-hidden"><!-- Left Side: Form Builder -->
   <div class="w-full lg:w-2/5 h-1/2 lg:h-full flex flex-col builder-container border-r-0 lg:border-r border-gray-200 overflow-auto">
    <div class="p-6 lg:p-8">
     <div class="mb-6">
      <h1 class="text-3xl font-bold text-gray-900 mb-2">Portfolio Builder</h1>
      <p class="text-gray-600 text-sm">Create your professional portfolio in minutes</p>
     </div><!-- Tabs -->
     <div class="flex gap-1 mb-6 border-b border-gray-200" role="tablist"><button class="tab-btn active" data-tab="personal" role="tab" aria-selected="true">Personal</button> <button class="tab-btn" data-tab="projects" role="tab" aria-selected="false">Projects</button> <button class="tab-btn" data-tab="skills" role="tab" aria-selected="false">Skills</button> <button class="tab-btn" data-tab="experience" role="tab" aria-selected="false">Experience</button> <button class="tab-btn" data-tab="education" role="tab" aria-selected="false">Education</button>
     </div><!-- Personal Info Tab -->
     <div id="personal-tab" class="tab-content space-y-4">
      <div><label for="full-name" class="block text-sm font-medium text-gray-700 mb-2">Full Name</label> <input id="full-name" type="text" placeholder="John Doe" class="input-field w-full" data-field="full_name">
      </div>
      <div><label for="title" class="block text-sm font-medium text-gray-700 mb-2">Professional Title</label> <input id="title" type="text" placeholder="Full Stack Developer" class="input-field w-full" data-field="title">
      </div>
      <div><label for="bio" class="block text-sm font-medium text-gray-700 mb-2">Bio</label> <textarea id="bio" placeholder="Tell us about yourself..." class="input-field w-full h-24 resize-none" data-field="bio"></textarea>
      </div>
      <div class="grid grid-cols-2 gap-3">
       <div><label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label> <input id="email" type="email" placeholder="you@example.com" class="input-field w-full" data-field="email">
       </div>
       <div><label for="phone" class="block text-sm font-medium text-gray-700 mb-2">Phone</label> <input id="phone" type="tel" placeholder="+1 (555) 123-4567" class="input-field w-full" data-field="phone">
       </div>
      </div>
      <div class="grid grid-cols-2 gap-3">
       <div><label for="location" class="block text-sm font-medium text-gray-700 mb-2">Location</label> <input id="location" type="text" placeholder="San Francisco, CA" class="input-field w-full" data-field="location">
       </div>
       <div><label for="website" class="block text-sm font-medium text-gray-700 mb-2">Website</label> <input id="website" type="url" placeholder="https://example.com" class="input-field w-full" data-field="website">
       </div>
      </div>
      <div class="grid grid-cols-3 gap-3">
       <div><label for="github" class="block text-sm font-medium text-gray-700 mb-2">GitHub</label> <input id="github" type="text" placeholder="username" class="input-field w-full" data-field="social_github">
       </div>
       <div><label for="linkedin" class="block text-sm font-medium text-gray-700 mb-2">LinkedIn</label> <input id="linkedin" type="text" placeholder="username" class="input-field w-full" data-field="social_linkedin">
       </div>
       <div><label for="twitter" class="block text-sm font-medium text-gray-700 mb-2">Twitter</label> <input id="twitter" type="text" placeholder="@username" class="input-field w-full" data-field="social_twitter">
       </div>
      </div>
     </div><!-- Projects Tab -->
     <div id="projects-tab" class="tab-content hidden space-y-4"><button id="add-project-btn" class="btn-primary w-full">+ Add Project</button>
      <div id="projects-list" class="space-y-4"></div>
     </div><!-- Skills Tab -->
     <div id="skills-tab" class="tab-content hidden space-y-4"><button id="add-skill-btn" class="btn-primary w-full">+ Add Skill</button>
      <div id="skills-list" class="space-y-3"></div>
     </div><!-- Experience Tab -->
     <div id="experience-tab" class="tab-content hidden space-y-4"><button id="add-experience-btn" class="btn-primary w-full">+ Add Experience</button>
      <div id="experience-list" class="space-y-4"></div>
     </div><!-- Education Tab -->
     <div id="education-tab" class="tab-content hidden space-y-4"><button id="add-education-btn" class="btn-primary w-full">+ Add Education</button>
      <div id="education-list" class="space-y-4"></div>
     </div>
    </div>
   </div><!-- Right Side: Live Preview -->
   <div class="w-full lg:w-3/5 h-1/2 lg:h-full preview-container text-white overflow-auto">
    <div id="portfolio-preview" class="w-full min-h-full"></div>
   </div>
  </div>
  <script>
    // Default configuration
    const defaultConfig = {
      site_title: "My Portfolio",
      accent_color_hex: "#6366f1",
      primary_color: "#6366f1",
      secondary_color: "#8b5cf6",
      text_color: "#ffffff",
      font_family: "Outfit",
      font_size: 16
    };

    let config = { ...defaultConfig };
    let portfolioData = {
      full_name: "",
      title: "",
      bio: "",
      email: "",
      phone: "",
      location: "",
      website: "",
      social_github: "",
      social_linkedin: "",
      social_twitter: "",
      projects: [],
      skills: [],
      experience: [],
      education: []
    };

    // Initialize Data SDK
    const dataHandler = {
      onDataChanged(data) {
        // Update portfolio data from sheet
        if (data && data.length > 0) {
          data.forEach(record => {
            if (record.full_name) portfolioData.full_name = record.full_name;
            if (record.title) portfolioData.title = record.title;
            if (record.bio) portfolioData.bio = record.bio;
            if (record.email) portfolioData.email = record.email;
            if (record.phone) portfolioData.phone = record.phone;
            if (record.location) portfolioData.location = record.location;
            if (record.website) portfolioData.website = record.website;
            if (record.social_github) portfolioData.social_github = record.social_github;
            if (record.social_linkedin) portfolioData.social_linkedin = record.social_linkedin;
            if (record.social_twitter) portfolioData.social_twitter = record.social_twitter;

            // Handle projects
            if (record.project_title) {
              const existingProject = portfolioData.projects.find(p => p.title === record.project_title);
              if (!existingProject) {
                portfolioData.projects.push({
                  title: record.project_title,
                  description: record.project_description || "",
                  link: record.project_link || "",
                  id: record.__backendId
                });
              }
            }

            // Handle skills
            if (record.skill_name) {
              if (!portfolioData.skills.find(s => s.name === record.skill_name)) {
                portfolioData.skills.push({
                  name: record.skill_name,
                  id: record.__backendId
                });
              }
            }

            // Handle experience
            if (record.experience_company) {
              const existingExp = portfolioData.experience.find(e => e.company === record.experience_company);
              if (!existingExp) {
                portfolioData.experience.push({
                  company: record.experience_company,
                  role: record.experience_role || "",
                  description: record.experience_description || "",
                  years: record.experience_years || "",
                  id: record.__backendId
                });
              }
            }

            // Handle education
            if (record.education_school) {
              const existingEdu = portfolioData.education.find(e => e.school === record.education_school);
              if (!existingEdu) {
                portfolioData.education.push({
                  school: record.education_school,
                  degree: record.education_degree || "",
                  year: record.education_year || "",
                  id: record.__backendId
                });
              }
            }
          });
        }
        renderPreview();
      }
    };

    // Initialize SDK
    (async () => {
      if (window.dataSdk) {
        await window.dataSdk.init(dataHandler);
      }
      
      if (window.elementSdk) {
        window.elementSdk.init({
          defaultConfig,
          onConfigChange: (cfg) => {
            config = cfg;
            renderPreview();
          },
          mapToCapabilities: (cfg) => ({
            recolorables: [
              {
                get: () => cfg.primary_color || defaultConfig.primary_color,
                set: (v) => { cfg.primary_color = v; window.elementSdk?.setConfig({ primary_color: v }); }
              },
              {
                get: () => cfg.secondary_color || defaultConfig.secondary_color,
                set: (v) => { cfg.secondary_color = v; window.elementSdk?.setConfig({ secondary_color: v }); }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => cfg.font_family || defaultConfig.font_family,
              set: (v) => { cfg.font_family = v; window.elementSdk?.setConfig({ font_family: v }); }
            },
            fontSizeable: {
              get: () => cfg.font_size || defaultConfig.font_size,
              set: (v) => { cfg.font_size = v; window.elementSdk?.setConfig({ font_size: v }); }
            }
          }),
          mapToEditPanelValues: (cfg) => new Map([
            ["site_title", cfg.site_title || defaultConfig.site_title],
            ["accent_color_hex", cfg.accent_color_hex || defaultConfig.accent_color_hex]
          ])
        });
      }
    })();

    // Form field handling
    const inputFields = document.querySelectorAll('input[data-field], textarea[data-field]');
    inputFields.forEach(field => {
      field.addEventListener('input', (e) => {
        const fieldName = e.target.dataset.field;
        portfolioData[fieldName] = e.target.value;
        saveField(fieldName, e.target.value);
        renderPreview();
      });
    });

    async function saveField(fieldName, value) {
      if (!window.dataSdk) return;
      
      const result = await window.dataSdk.create({
        [fieldName]: value,
        full_name: portfolioData.full_name || "Portfolio"
      });

      if (!result.isOk) {
        console.error("Error saving field:", result.error);
      }
    }

    // Tab switching
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.add('hidden'));
        
        btn.classList.add('active');
        const tabId = btn.dataset.tab + '-tab';
        document.getElementById(tabId).classList.remove('hidden');
      });
    });

    // Add project
    document.getElementById('add-project-btn').addEventListener('click', () => {
      const project = { title: "", description: "", link: "", id: Date.now() };
      portfolioData.projects.push(project);
      renderProjectsList();
      renderPreview();
    });

    function renderProjectsList() {
      const container = document.getElementById('projects-list');
      container.innerHTML = portfolioData.projects.map((project, index) => `
        <div class="form-card p-4 space-y-3">
          <input type="text" placeholder="Project Title" value="${project.title}" class="input-field w-full" data-project-idx="${index}" data-project-field="title">
          <textarea placeholder="Description" class="input-field w-full h-20 resize-none" data-project-idx="${index}" data-project-field="description">${project.description}</textarea>
          <input type="url" placeholder="Project Link" value="${project.link}" class="input-field w-full" data-project-idx="${index}" data-project-field="link">
          <button class="btn-secondary w-full text-red-600 hover:bg-red-50" data-remove-project="${index}">Remove</button>
        </div>
      `).join("");

      container.querySelectorAll('[data-project-idx]').forEach(el => {
        el.addEventListener('input', (e) => {
          const idx = parseInt(e.target.dataset.projectIdx);
          const field = e.target.dataset.projectField;
          portfolioData.projects[idx][field] = e.target.value;
          renderPreview();
        });
      });

      container.querySelectorAll('[data-remove-project]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = parseInt(e.target.dataset.removeProject);
          portfolioData.projects.splice(idx, 1);
          renderProjectsList();
          renderPreview();
        });
      });
    }

    // Add skill
    document.getElementById('add-skill-btn').addEventListener('click', () => {
      portfolioData.skills.push({ name: "", id: Date.now() });
      renderSkillsList();
      renderPreview();
    });

    function renderSkillsList() {
      const container = document.getElementById('skills-list');
      container.innerHTML = portfolioData.skills.map((skill, index) => `
        <div class="flex gap-2">
          <input type="text" placeholder="Skill name (e.g., React, Node.js)" value="${skill.name}" class="input-field flex-1" data-skill-idx="${index}">
          <button class="btn-secondary px-3" data-remove-skill="${index}">✕</button>
        </div>
      `).join("");

      container.querySelectorAll('[data-skill-idx]').forEach(el => {
        el.addEventListener('input', (e) => {
          const idx = parseInt(e.target.dataset.skillIdx);
          portfolioData.skills[idx].name = e.target.value;
          renderPreview();
        });
      });

      container.querySelectorAll('[data-remove-skill]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = parseInt(e.target.dataset.removeSkill);
          portfolioData.skills.splice(idx, 1);
          renderSkillsList();
          renderPreview();
        });
      });
    }

    // Add experience
    document.getElementById('add-experience-btn').addEventListener('click', () => {
      portfolioData.experience.push({ company: "", role: "", description: "", years: "", id: Date.now() });
      renderExperienceList();
      renderPreview();
    });

    function renderExperienceList() {
      const container = document.getElementById('experience-list');
      container.innerHTML = portfolioData.experience.map((exp, index) => `
        <div class="form-card p-4 space-y-3">
          <div class="grid grid-cols-2 gap-2">
            <input type="text" placeholder="Company" value="${exp.company}" class="input-field" data-exp-idx="${index}" data-exp-field="company">
            <input type="text" placeholder="Role" value="${exp.role}" class="input-field" data-exp-idx="${index}" data-exp-field="role">
          </div>
          <textarea placeholder="Description" class="input-field w-full h-16 resize-none" data-exp-idx="${index}" data-exp-field="description">${exp.description}</textarea>
          <input type="text" placeholder="Years (e.g., 2020-2023)" value="${exp.years}" class="input-field w-full" data-exp-idx="${index}" data-exp-field="years">
          <button class="btn-secondary w-full text-red-600 hover:bg-red-50" data-remove-exp="${index}">Remove</button>
        </div>
      `).join("");

      container.querySelectorAll('[data-exp-idx]').forEach(el => {
        el.addEventListener('input', (e) => {
          const idx = parseInt(e.target.dataset.expIdx);
          const field = e.target.dataset.expField;
          portfolioData.experience[idx][field] = e.target.value;
          renderPreview();
        });
      });

      container.querySelectorAll('[data-remove-exp]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = parseInt(e.target.dataset.removeExp);
          portfolioData.experience.splice(idx, 1);
          renderExperienceList();
          renderPreview();
        });
      });
    }

    // Add education
    document.getElementById('add-education-btn').addEventListener('click', () => {
      portfolioData.education.push({ school: "", degree: "", year: "", id: Date.now() });
      renderEducationList();
      renderPreview();
    });

    function renderEducationList() {
      const container = document.getElementById('education-list');
      container.innerHTML = portfolioData.education.map((edu, index) => `
        <div class="form-card p-4 space-y-3">
          <input type="text" placeholder="School/University" value="${edu.school}" class="input-field w-full" data-edu-idx="${index}" data-edu-field="school">
          <div class="grid grid-cols-2 gap-2">
            <input type="text" placeholder="Degree" value="${edu.degree}" class="input-field" data-edu-idx="${index}" data-edu-field="degree">
            <input type="text" placeholder="Graduation Year" value="${edu.year}" class="input-field" data-edu-idx="${index}" data-edu-field="year">
          </div>
          <button class="btn-secondary w-full text-red-600 hover:bg-red-50" data-remove-edu="${index}">Remove</button>
        </div>
      `).join("");

      container.querySelectorAll('[data-edu-idx]').forEach(el => {
        el.addEventListener('input', (e) => {
          const idx = parseInt(e.target.dataset.eduIdx);
          const field = e.target.dataset.eduField;
          portfolioData.education[idx][field] = e.target.value;
          renderPreview();
        });
      });

      container.querySelectorAll('[data-remove-edu]').forEach(btn => {
        btn.addEventListener('click', (e) => {
          const idx = parseInt(e.target.dataset.removeEdu);
          portfolioData.education.splice(idx, 1);
          renderEducationList();
          renderPreview();
        });
      });
    }

    // Render portfolio preview
    function renderPreview() {
      const accentColor = config.accent_color_hex || "#6366f1";
      const preview = document.getElementById('portfolio-preview');
      
      const hasSocial = portfolioData.social_github || portfolioData.social_linkedin || portfolioData.social_twitter;
      
      preview.innerHTML = `
        <div class="w-full min-h-full">
          <!-- Hero Section -->
          <section class="portfolio-hero py-16 md:py-24 px-6 md:px-12 relative">
            <div class="max-w-6xl mx-auto text-center relative z-10">
              <div class="w-24 h-24 md:w-32 md:h-32 mx-auto mb-8 rounded-full bg-gradient-to-br from-indigo-400 to-purple-600 flex items-center justify-center text-5xl font-bold">
                ${(portfolioData.full_name || "YP").charAt(0)}
              </div>
              <h1 class="text-4xl md:text-6xl font-bold mb-4">${portfolioData.full_name || "Your Name"}</h1>
              <p class="text-xl md:text-2xl text-indigo-300 mb-6">${portfolioData.title || "Your Professional Title"}</p>
              ${portfolioData.bio ? `<p class="text-gray-300 max-w-2xl mx-auto text-lg mb-8">${portfolioData.bio}</p>` : ''}
              
              ${hasSocial ? `
                <div class="flex justify-center gap-4 mb-8">
                  ${portfolioData.social_github ? `<a href="https://github.com/${portfolioData.social_github}" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-indigo-400 transition">GitHub</a>` : ''}
                  ${portfolioData.social_linkedin ? `<a href="https://linkedin.com/in/${portfolioData.social_linkedin}" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-indigo-400 transition">LinkedIn</a>` : ''}
                  ${portfolioData.social_twitter ? `<a href="https://twitter.com/${portfolioData.social_twitter}" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-indigo-400 transition">Twitter</a>` : ''}
                </div>
              ` : ''}

              <div class="flex flex-wrap justify-center gap-3">
                ${portfolioData.email ? `<a href="mailto:${portfolioData.email}" class="px-6 py-3 rounded-lg" style="background-color: ${accentColor}; color: white; font-weight: 600; text-decoration: none; transition: all 0.3s ease;" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 10px 25px rgba(99, 102, 241, 0.3)'" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='none'">Get In Touch</a>` : ''}
                ${portfolioData.website ? `<a href="${portfolioData.website}" target="_blank" rel="noopener noreferrer" class="px-6 py-3 rounded-lg border-2" style="border-color: ${accentColor}; color: white; font-weight: 600; text-decoration: none; transition: all 0.3s ease;" onmouseover="this.style.background='rgba(99, 102, 241, 0.1)'" onmouseout="this.style.background='transparent'">Visit Site</a>` : ''}
              </div>

              ${portfolioData.location || portfolioData.phone ? `
                <div class="flex justify-center gap-6 mt-8 text-gray-400">
                  ${portfolioData.location ? `<span>${portfolioData.location}</span>` : ''}
                  ${portfolioData.phone ? `<span>${portfolioData.phone}</span>` : ''}
                </div>
              ` : ''}
            </div>
          </section>

          <!-- Projects Section -->
          ${portfolioData.projects.length > 0 ? `
            <section class="portfolio-section py-16 px-6 md:px-12 max-w-6xl mx-auto">
              <h2 class="text-3xl md:text-4xl font-bold mb-12">Featured Projects</h2>
              <div class="grid md:grid-cols-2 gap-6">
                ${portfolioData.projects.filter(p => p.title).map(project => `
                  <div class="portfolio-card p-6 fade-in">
                    <h3 class="text-xl font-bold mb-2">${project.title}</h3>
                    <p class="text-gray-400 mb-4">${project.description}</p>
                    ${project.link ? `<a href="${project.link}" target="_blank" rel="noopener noreferrer" class="inline-block text-indigo-400 hover:text-indigo-300 transition font-medium">View Project →</a>` : ''}
                  </div>
                `).join('')}
              </div>
            </section>
          ` : ''}

          <!-- Skills Section -->
          ${portfolioData.skills.length > 0 ? `
            <section class="portfolio-section py-16 px-6 md:px-12 max-w-6xl mx-auto">
              <h2 class="text-3xl md:text-4xl font-bold mb-12">Skills & Expertise</h2>
              <div class="flex flex-wrap gap-3">
                ${portfolioData.skills.filter(s => s.name).map(skill => `
                  <span class="skill-badge fade-in">${skill.name}</span>
                `).join('')}
              </div>
            </section>
          ` : ''}

          <!-- Experience Section -->
          ${portfolioData.experience.length > 0 ? `
            <section class="portfolio-section py-16 px-6 md:px-12 max-w-6xl mx-auto">
              <h2 class="text-3xl md:text-4xl font-bold mb-12">Experience</h2>
              <div class="space-y-8">
                ${portfolioData.experience.filter(e => e.company).map((exp, idx) => `
                  <div class="portfolio-card p-6 fade-in" style="animation-delay: ${idx * 0.1}s">
                    <div class="flex justify-between items-start mb-2">
                      <h3 class="text-xl font-bold">${exp.role}</h3>
                      ${exp.years ? `<span class="text-sm text-gray-400">${exp.years}</span>` : ''}
                    </div>
                    <p class="text-indigo-400 font-medium mb-3">${exp.company}</p>
                    <p class="text-gray-400">${exp.description}</p>
                  </div>
                `).join('')}
              </div>
            </section>
          ` : ''}

          <!-- Education Section -->
          ${portfolioData.education.length > 0 ? `
            <section class="portfolio-section py-16 px-6 md:px-12 max-w-6xl mx-auto">
              <h2 class="text-3xl md:text-4xl font-bold mb-12">Education</h2>
              <div class="space-y-6">
                ${portfolioData.education.filter(e => e.school).map((edu, idx) => `
                  <div class="portfolio-card p-6 fade-in" style="animation-delay: ${idx * 0.1}s">
                    <h3 class="text-xl font-bold mb-1">${edu.degree}</h3>
                    <p class="text-indigo-400 font-medium mb-2">${edu.school}</p>
                    ${edu.year ? `<p class="text-gray-400 text-sm">${edu.year}</p>` : ''}
                  </div>
                `).join('')}
              </div>
            </section>
          ` : ''}

          <!-- Footer -->
          <footer class="border-t border-gray-700 py-12 px-6 md:px-12 text-center text-gray-500">
            <p>© 2024 ${portfolioData.full_name || "Your Name"}. All rights reserved.</p>
          </footer>
        </div>
      `;
    }

    // Initial render
    renderPreview();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9cdbbaba93ed8ef4',t:'MTc3MTA2MzM0MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>